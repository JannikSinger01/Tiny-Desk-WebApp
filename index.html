<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geschichtswissenschaft im Wandel | Präsentation</title>
    <!-- GSAP & Plugins -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        :root {
            --bg: #ffffff;
            --text: #000000;
            --border: #eeeeee;
            --accent: #555555;
            --caption: #777777;
            --modal-overlay: rgba(255, 255, 255, 0.98);
        }

        * { box-sizing: border-box; }

        body { 
            margin: 0; 
            background: var(--bg); 
            font-family: 'Times New Roman', Times, serif; 
            color: var(--text);
            overflow-x: hidden;
            overflow-y: hidden; 
        }

        h1, h2, h3 { font-weight: normal; margin: 0; }
        p { line-height: 1.4; font-size: 1.1rem; }

        /* --- Intro Overlay --- */
        #intro-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .stage {
            position: relative;
            width: 100%;
            height: 120px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .counter { 
            font-size: clamp(3rem, 10vw, 5rem); 
            position: absolute;
            white-space: nowrap;
        }

        #next-question { transform: translateX(100vw); }

        .title-intro { 
            font-size: clamp(1.2rem, 3vw, 2rem); 
            position: absolute; 
            opacity: 0; 
            max-width: 900px;
            text-align: center;
            padding: 0 20px;
            transform: translateY(30px);
            line-height: 1.3;
        }

        /* --- Horizontale Sektionen --- */
        section.horizontal-section {
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .horizontal-wrapper {
            display: flex;
            width: 500%; 
            height: 100vh;
            will-change: transform;
        }

        .slide {
            width: 100vw;
            height: 100vh;
            display: flex;
            padding: 60px 80px;
            border-right: 1px solid var(--border);
            align-items: flex-start;
            justify-content: center;
            position: relative;
        }

        .slide-content {
            display: flex;
            width: 100%;
            max-width: 1200px;
            gap: 60px;
            align-items: flex-start;
            margin-top: 20px;
            height: 100%;
        }

        .slide-content.rev {
            flex-direction: row-reverse;
        }

        .text-side {
            flex: 1.2;
            text-align: left;
        }

        .image-side {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            position: relative;
            height: 100%;
        }

        .image-container {
            position: relative;
            width: 100%;
        }

        .slide-meta {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 15px;
            display: block;
            opacity: 0.5;
            border-bottom: 1px solid #000;
            padding-bottom: 5px;
            width: fit-content;
        }

        .text-side h2 {
            font-size: clamp(1.5rem, 4vw, 2rem); 
            line-height: 1.1;
            margin-bottom: 15px;
            white-space: nowrap; 
        }

        .text-side h2 span.subtitle {
            display: block; 
            font-size: 1.2rem;
            color: var(--accent);
            margin-top: 10px;
            white-space: normal; 
        }

        .presentation-notes {
            margin-top: 20px;
        }

        .presentation-notes ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .presentation-notes li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 12px;
            font-size: 1rem;
            line-height: 1.4;
            color: var(--text);
        }

        .presentation-notes li::before {
            content: "→";
            position: absolute;
            left: 0;
            color: #000;
            font-weight: bold;
        }

        /* --- Buttons & Modals --- */
        .btn-deep-dive {
            margin-top: auto; 
            margin-bottom: 40px;
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--border);
            padding: 8px 16px;
            font-family: inherit;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.3s ease;
            width: fit-content;
            align-self: flex-start;
        }

        .slide-content.rev .btn-deep-dive {
            align-self: flex-end;
        }

        .btn-deep-dive:hover {
            border-color: #000;
            color: #000;
            background: #fdfdfd;
        }

        #modal-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: var(--modal-overlay);
            z-index: 2000;
            display: none;
            opacity: 0;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .modal-container {
            max-width: 800px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            background: #fff;
            border: 1px solid #000;
            padding: 60px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.05);
        }

        .modal-close {
            position: absolute;
            top: 20px; right: 20px;
            background: transparent;
            border: none;
            font-size: 2.5rem;
            cursor: pointer;
            line-height: 1;
        }

        .modal-body h3 {
            font-size: 1.8rem;
            margin-bottom: 25px;
            border-bottom: 2px solid #000;
            padding-bottom: 10px;
        }

        .modal-body .deep-content {
            font-size: 1.15rem;
            line-height: 1.7;
            text-align: justify;
        }

        .image-box {
            width: 100%;
            aspect-ratio: 4/3;
            background: #fafafa;
            border: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
            padding: 20px;
            text-align: center;
        }

        .image-caption {
            margin-top: 10px;
            font-size: 0.8rem;
            color: var(--caption);
            font-style: italic;
            line-height: 1.3;
        }

        /* --- Kapitel 3: Story-Scroller --- */
        #part-3 {
            position: relative;
            background: var(--bg);
        }

        .story-header {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 0 10%;
        }

        .story-container {
            display: flex;
            position: relative;
        }

        .story-visuals {
            flex: 1;
            height: 100vh;
            position: sticky;
            top: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px;
        }

        .sticky-image-box {
            width: 100%;
            height: 70%;
            background: #fdfdfd;
            border: 1px solid #000;
            display: flex;
            align-items: center;
            justify-content: center;
            font-style: italic;
            position: relative;
            transition: opacity 0.5s ease;
        }

        .story-content {
            flex: 1;
            padding: 0 5%;
        }

        .story-step {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 20px 0;
            opacity: 0.3;
            transition: opacity 0.5s ease;
        }

        .story-step.active {
            opacity: 1;
        }

        .code-snippet {
            font-family: monospace;
            background: #f4f4f4;
            padding: 20px;
            border-left: 3px solid #000;
            margin: 20px 0;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }

        /* --- Navigationshilfe --- */
        .scroll-indicator {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7rem;
            text-transform: uppercase;
            opacity: 0.4;
            z-index: 50;
        }

        hr { width: 40px; border: 0; border-top: 1px solid #000; margin: 15px 0; }
        
        button.start-btn {
            margin-top: 40px;
            background: transparent;
            border: 1px solid #000;
            padding: 12px 40px;
            cursor: pointer;
            font-family: 'Times New Roman';
            font-size: 1rem;
            transition: background 0.3s;
        }
        button.start-btn:hover { background: #000; color: #fff; }
    </style>
</head>
<body>

    <div id="modal-overlay">
        <div class="modal-container">
            <button class="modal-close" id="close-modal">&times;</button>
            <div class="modal-body">
                <h3 id="modal-title">Titel der Vertiefung</h3>
                <div id="modal-content" class="deep-content"></div>
            </div>
        </div>
    </div>

    <div id="intro-overlay">
        <div class="stage">
            <div id="year-display" class="counter">3000 v.Chr.</div>
            <div id="next-question" class="counter">Und weiter?</div>
        </div>
        <!-- Haupttitel der Anfangsanimation angepasst -->
        <h1 class="title-intro">Geschichtswissenschaft im Wandel:<br>Wie KI die Digital History prägt</h1>
    </div>

    <div class="scroll-indicator">Scrollen</div>

    <main id="main-content">
        
        <!-- KAPITEL 1 -->
        <section id="c1-trigger" class="horizontal-section">
            <div class="horizontal-wrapper" id="c1-wrapper">
                
                <!-- Slide 1.1 -->
                <div class="slide">
                    <div class="slide-content">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel I: Forschungserfolge</span>
                            <div class="image-container">
                                <div class="image-box">[Bild: Winniza Originalquelle]</div>
                            </div>
                            <div class="image-caption">Abb. 1: Originalfotografie aus dem Archiv XY. Quelle: Bundesarchiv, Best. 123.</div>
                            <button class="btn-deep-dive" 
                                data-title="Vertiefung: Biometrische Identifikation" 
                                data-content="Die biometrische Analyse stützt sich auf über 40 Messpunkte im Gesichtsbereich. Im Fall Winniza wurden insbesondere die Ohr-Morphologie und der Augenabstand mit den Personalstammblättern der SS abgeglichen. Dieser Prozess erforderte eine digitale Rauschunterdrückung des historischen Materials, um Artefakte der analogen Entwicklung von echten Gesichtsmerkmalen zu unterscheiden. Wissenschaftlich relevant ist hier die Verschiebung von einer subjektiven Ähnlichkeitsprüfung hin zu einer statistisch validierbaren Identitätsprüfung.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>"Der letzte Jude von Winniza" <span class="subtitle">eine Rekonstruktion</span></h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Eine der bekannstesten Bildikonen des Holocausts (datiert zwischen 1941-1943)</li>
                                    <li>Bild in Berdytschiw entstanden, nicht in Winniza</li>
                                    <li>Momentaufnahme vor einem Mord an einen unbekannten Juden in der Ukraine</li>
                                    <li>Täter wurde 2025 von Jürgen Matthäus identifiziert - u.a. mithilfe von KI</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 1.2 -->
                <div class="slide">
                    <div class="slide-content">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel I: Forschungserfolge</span>
                            <div class="image-container">
                                <div class="image-box">[Bild: Jakobus Onnen Porträt/Dokumente]</div>
                            </div>
                            <div class="image-caption">Abb. 2: Biografische Rekonstruktion des Täters.</div>
                            <button class="btn-deep-dive" 
                                data-title="Vertiefung: Rekonstruktion von Täterbiografien" 
                                data-content="Die Identifikation von Jakobus Onnen ist ein Paradebeispiel für die Kombination von KI-gestützter Bildanalyse und klassischer Archivrecherche. Jürgen Matthäus konnte durch den Abgleich von biometrischen Merkmalen auf dem historischen Foto mit Personalakten der SS und der Ordnungspolizei die Identität zweifelsfrei klären. Dies unterstreicht die Bedeutung der KI als Heuristik-Tool, das Hinweise liefert, die dann hermeneutisch und quellenkritisch abgesichert werden müssen.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>"Der letzte Jude von Winniza" <span class="subtitle">eine Analyse</span></h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Täter wurde 2025 von Jürgen Matthäus als Jakobus Onnen identifiziert</li>
                                    <li>Onnen (geb. 1906 in Tichelwarf, Ostfriesland) war Lehrer für Französisch, Englisch und Sport</li>
                                    <li>Er trat 1931 in die SA, 1932 in die SS ein</li>
                                    <li>1939 Teil der Ordnungspolizei in Polen, ab 1941 Teil der Einsatzgruppe C</li>
                                    <li>Er begann ersten Mord höchstwahrscheinlich 1941</li>
                                    <li>Onnen starb 1943 im Krieg</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 1.3 -->
                <div class="slide">
                    <div class="slide-content">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel I: Forschungserfolge</span>
                            <div class="image-container">
                                <div class="image-box">[Bild: Datenbank-Struktur]</div>
                            </div>
                            <div class="image-caption">Abb. 3: Datenbankabfrage. Quelle: ITS Arolsen.</div>
                            <button class="btn-deep-dive" data-title="Archiv-Digitalisierung & Big Data" data-content="Die integration der Bestände des International Tracing Service (ITS) markiert eine Zäsur. Metadata-Harvesting und automatisierte Volltextsuche erlauben eine Aggregation von Indizien in nahezu Echtzeit.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Datenabgleich</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Massendatenverarbeitung von Millionen digitalisierter Karteikarten.</li>
                                    <li>Cross-Referencing: Verknüpfung von Bilddaten mit Schriftquellen.</li>
                                    <li>Zusammenführung disparater Archivbestände.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Slide 1.4 -->
                <div class="slide">
                    <div class="slide-content">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel I: Forschungserfolge</span>
                            <div class="image-container">
                                <div class="image-box">[Beweiskraft]</div>
                            </div>
                            <button class="btn-deep-dive" data-title="Statistische Evidenz vs. Hermeneutik" data-content="Historische Beweiskraft beruhte traditionell auf der Plausibilität der Erzählung. KI führt nun die 'wahrscheinlichste Deutung' als mathematischen Wert ein, was eine Neudefinition des 'historischen Fakts' erfordert.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Beweiskraft</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Statistische Wahrscheinlichkeit als Hilfsmittel.</li>
                                    <li>Validierung durch algorithmische Vergleiche.</li>
                                    <li>Grenzen der mathematischen Beweisführung.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 1.5 -->
                <div class="slide">
                    <div class="slide-content">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel I: Forschungserfolge</span>
                            <div class="image-container">
                                <div class="image-box">[Ergebnis]</div>
                            </div>
                            <button class="btn-deep-dive" data-title="Historiographische Konsequenzen" data-content="Die Identifikation von Tätern verändert unsere Perspektive auf die soziale Struktur der Tatbeteiligten und die Rekonstruktion von Verbrechenskomplexen.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Ergebnis</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Schließung historischer Lücken.</li>
                                    <li>Potenzial für zukünftige Forschungen.</li>
                                    <li>Konsequenzen für die Täterforschung.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- KAPITEL 2 -->
        <section id="c2-trigger" class="horizontal-section">
            <div class="horizontal-wrapper" id="c2-wrapper">
                
                <!-- Slide 2.1 -->
                <div class="slide">
                    <div class="slide-content rev">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel II: Kritische Reflexion</span>
                            <div class="image-container">
                                <div class="image-box">[Bild: Blackbox-Symbolik]</div>
                            </div>
                            <div class="image-caption">Abb. 6: Algorithmische Blackbox. Quelle: CC-BY 4.0.</div>
                            <button class="btn-deep-dive" data-title="Kritik der algorithmischen Vernunft" data-content="Ohne Nachvollziehbarkeit verliert die Geschichtswissenschaft ihre Basis. Explainable AI (XAI) versucht, diese Prozesse durch Visualisierungen wieder sichtbar zu machen.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Die algorithmische Blackbox</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Problem: Wie kommen Algorithmen zu ihren Schlüssen?</li>
                                    <li>Mangelnde Nachvollziehbarkeit widerspricht wissenschaftlichen Standards.</li>
                                    <li>Forderung nach "Explainable AI" in der Historie.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2.2 -->
                <div class="slide">
                    <div class="slide-content rev">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel II: Kritische Reflexion</span>
                            <div class="image-container">
                                <div class="image-box">[Bild: Halluzinations-Beispiel]</div>
                            </div>
                            <div class="image-caption">Abb. 7: KI-Fehlzitate. Quelle: KI-Audit.</div>
                            <button class="btn-deep-dive" data-title="Phänomenologie der Halluzination" data-content="Large Language Models optimieren auf Wahrscheinlichkeit, nicht auf Wahrheit. Dies führt zu 'Fake Citations', die unentdeckt in den wissenschaftlichen Diskurs einfließen können.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Digitale Halluzinationen</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Generative KI neigt zur Erfindung plausibel klingender Fakten.</li>
                                    <li>Gefahr von "Fake Citations" in Publikationen.</li>
                                    <li>Notwendigkeit massiver Fact-Checking-Infrastrukturen.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2.3 -->
                <div class="slide">
                    <div class="slide-content rev">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel II: Kritische Reflexion</span>
                            <div class="image-container">
                                <div class="image-box">[Bias]</div>
                            </div>
                            <button class="btn-deep-dive" data-title="Postkoloniale Digitale Kritik" data-content="Die dominance westlicher Archive im Netz führt dazu, dass KI-Modelle eine eurozentrische Sicht auf die Weltgeschichte einnehmen.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Struktureller Bias</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>"Digital Divide" in der Überlieferung.</li>
                                    <li>Bias in Trainingsdaten verstärkt Vorurteile.</li>
                                    <li>Herausforderung: Diversität in der digitalen Heuristik.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2.4 -->
                <div class="slide">
                    <div class="slide-content rev">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel II: Kritische Reflexion</span>
                            <div class="image-container">
                                <div class="image-box">[Kritik]</div>
                            </div>
                            <button class="btn-deep-dive" data-title="Das Ende der Geschichte?" data-content="Datenfetischismus droht die qualitative Analyse zu verdrängen. Historisches Verstehen erfordert mehr als reine Mustererkennung.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Methodenkritik</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Mustererkennung vs. Kontextanalyse.</li>
                                    <li>Grenzen des rein Quantitativen in der Hermeneutik.</li>
                                    <li>Gefahr des technischen Reduktionismus.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Slide 2.5 -->
                <div class="slide">
                    <div class="slide-content rev">
                        <div class="image-side">
                            <span class="slide-meta">Kapitel II: Kritische Reflexion</span>
                            <div class="image-container">
                                <div class="image-box">[Hermeneutik]</div>
                            </div>
                            <button class="btn-deep-dive" data-title="Quellenkritik 2.0" data-content="Die Zukunft liegt in der 'Distant Reading' Methode gepaart mit 'Close Reading'. Ein hybrider Ansatz ist die Antwort auf die digitale Flut.">weitere Informationen</button>
                        </div>
                        <div class="text-side">
                            <h2>Hermeneutik 2.0</h2>
                            <hr>
                            <div class="presentation-notes">
                                <ul>
                                    <li>Hybride Forschungsmethodik (Man + Machine).</li>
                                    <li>Quellenkritik im Zeitalter der KI-Manipulation.</li>
                                    <li>Entwicklung neuer digitaler Standards.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- KAPITEL 3 -->
        <section id="part-3">
            <div class="story-header">
                <span class="slide-meta">Kapitel III: Vibe-Coding</span>
                <h2>Genese dieser Applikation</h2>
                <hr>
                <p>Ein Werkstattbericht über die Erstellung dieser interaktiven Präsentation.</p>
            </div>

            <div class="story-container">
                <div class="story-visuals">
                    <div class="sticky-image-box" id="story-image">
                        [Screenshot: Erster Prompt]
                    </div>
                    <div class="image-caption" id="story-caption">Quelle: Dokumentation der Entwicklungssession.</div>
                </div>

                <div class="story-content">
                    <div class="story-step" data-image="[Screenshot: Der erste Vibe]" data-caption="Quelle: Initiales Designkonzept / Vibe-Check.">
                        <h3>1. Die Vision / Der Vibe</h3>
                        <hr>
                        <p>Alles begann mit einer groben Skizze: Eine WebApp, die sich wie ein wissenschaftliches Dossier anfühlt.</p>
                        <div class="code-snippet">
User: "Erstelle eine WebApp für einen Historiker-Vortrag..."
                        </div>
                    </div>

                    <div class="story-step" data-image="[Screenshot: Debugging-Prozess]" data-caption="Quelle: Log-Protokoll der CSS-Anpassungen.">
                        <h3>2. Iteratives Design</h3>
                        <hr>
                        <p>Anpassung der Scroll-Richtungen und Layouts für maximale inhaltliche Wirkung.</p>
                    </div>

                    <div class="story-step" data-image="[Screenshot: GSAP Integration]" data-caption="Quelle: GSAP API Dokumentation & Implementation.">
                        <h3>3. Die Technik</h3>
                        <hr>
                        <p>GSAP ScrollTrigger zur Steuerung der Aufmerksamkeit.</p>
                    </div>

                    <div class="story-step" data-image="[Screenshot: Finale App]" data-caption="Quelle: Deployment der Live-Vorschau.">
                        <h3>4. Das Ergebnis</h3>
                        <hr>
                        <p>Ein hybrides Artefakt aus Geisteswissenschaft und moderner Webentwicklung.</p>
                        <button class="start-btn" onclick="window.scrollTo({top:0, behavior:'smooth'})">Zurück zum Start</button>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        let introTimeline;
        let isIntroFinished = false;

        const modalOverlay = document.getElementById('modal-overlay');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const closeModal = document.getElementById('close-modal');

        function openDeepDive(title, content) {
            modalTitle.innerText = title;
            modalContent.innerText = content;
            modalOverlay.style.display = 'flex';
            gsap.to(modalOverlay, { opacity: 1, duration: 0.3 });
            document.body.style.overflow = 'hidden'; 
        }

        function closeDeepDive() {
            gsap.to(modalOverlay, { 
                opacity: 0, 
                duration: 0.3, 
                onComplete: () => {
                    modalOverlay.style.display = 'none';
                    if (isIntroFinished) document.body.style.overflowY = 'auto';
                } 
            });
        }

        document.querySelectorAll('.btn-deep-dive').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.stopPropagation();
                openDeepDive(btn.getAttribute('data-title'), btn.getAttribute('data-content'));
            });
        });

        closeModal.addEventListener('click', closeDeepDive);
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) closeDeepDive();
        });

        window.onload = () => {
            introTimeline = gsap.timeline({
                onComplete: () => {
                    isIntroFinished = true;
                    document.body.style.overflowY = "auto";
                    document.body.style.cursor = "default";
                    initScrollAnimations();
                }
            });

            const yearDisplay = document.getElementById("year-display");
            let countData = { val: -3000 };

            introTimeline.to(countData, {
                val: 2026,
                duration: 4.5, 
                ease: "power2.inOut",
                onUpdate: () => {
                    const currentYear = Math.floor(countData.val);
                    yearDisplay.innerText = currentYear < 0 ? Math.abs(currentYear) + " v.Chr." : currentYear + " n.Chr.";
                }
            });

            introTimeline.to("#year-display", { x: "-100vw", duration: 0.8, ease: "power2.inOut", delay: 0.5 })
                         .to("#next-question", { x: "0", duration: 0.8, ease: "power2.inOut" }, "<");
            
            introTimeline.to("#next-question", { opacity: 0, duration: 0.5, delay: 0.5 });
            introTimeline.to(".title-intro", { opacity: 1, y: 0, duration: 1 });
            
            introTimeline.to("#intro-overlay", {
                yPercent: -100,
                duration: 1.2,
                ease: "expo.inOut",
                delay: 1.5 
            });
        };

        function initScrollAnimations() {
            const c1Wrapper = document.getElementById("c1-wrapper");
            gsap.to(c1Wrapper, {
                xPercent: -80,
                ease: "none",
                scrollTrigger: {
                    trigger: "#c1-trigger",
                    pin: true,
                    scrub: 1,
                    snap: 1 / 4,
                    start: "top top",
                    end: () => "+=" + (window.innerWidth * 4)
                }
            });

            const c2Wrapper = document.getElementById("c2-wrapper");
            gsap.fromTo(c2Wrapper, 
                { xPercent: -80 }, 
                {
                    xPercent: 0, 
                    ease: "none",
                    scrollTrigger: {
                        trigger: "#c2-trigger",
                        pin: true,
                        scrub: 1,
                        snap: 1 / 4,
                        start: "top top",
                        end: () => "+=" + (window.innerWidth * 4)
                    }
                }
            );

            const steps = gsap.utils.toArray(".story-step");
            const imageBox = document.getElementById("story-image");
            const captionBox = document.getElementById("story-caption");

            steps.forEach((step, i) => {
                ScrollTrigger.create({
                    trigger: step,
                    start: "top center",
                    end: "bottom center",
                    onToggle: (self) => {
                        if (self.isActive) {
                            steps.forEach(s => s.classList.remove("active"));
                            step.classList.add("active");
                            
                            const newImageText = step.getAttribute("data-image");
                            const newCaptionText = step.getAttribute("data-caption");

                            gsap.to([imageBox, captionBox], {
                                opacity: 0,
                                duration: 0.2,
                                onComplete: () => {
                                    imageBox.innerText = newImageText;
                                    captionBox.innerText = newCaptionText;
                                    gsap.to([imageBox, captionBox], { opacity: 1, duration: 0.2 });
                                }
                            });
                        }
                    }
                });
            });
        }
    </script>
</body>
</html>
